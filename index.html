<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Popup UI - Ultimate Version</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
    
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #00FF00; /* Saya ganti abu gelap biar mata tidak sakit, kembalikan ke #00FF00 jika perlu green screen */
            margin: 0;
            font-family: 'Orbitron', sans-serif; 
        }

        /* --- ANIMASI & STYLE POPUP (SAMA SEPERTI SEBELUMNYA) --- */
        @keyframes borderPulseRed {
            0% { box-shadow: 0 0 10px rgba(255, 71, 87, 0.2); border-color: rgba(255, 71, 87, 0.5); }
            50% { box-shadow: 0 0 35px rgba(255, 71, 87, 0.5); border-color: #ff4757; }
            100% { box-shadow: 0 0 10px rgba(255, 71, 87, 0.2); border-color: rgba(255, 71, 87, 0.5); }
        }

        @keyframes borderPulseBlue {
            0% { box-shadow: 0 0 15px rgba(10, 189, 227, 0.2); border-color: rgba(10, 189, 227, 0.5); }
            50% { box-shadow: 0 0 50px rgba(10, 189, 227, 0.8); border-color: #0abde3; }
            100% { box-shadow: 0 0 15px rgba(10, 189, 227, 0.2); border-color: rgba(10, 189, 227, 0.5); }
        }

        @keyframes popSwitch {
            0% { transform: scale(1); }
            40% { transform: scale(0.95); filter: brightness(1.3); } 
            80% { transform: scale(1.02); } 
            100% { transform: scale(1); }
        }

        .game-popup {
            width: 380px; 
            padding: 45px 20px;
            text-align: center;
            background: #00FF00; /* Background popup agak gelap */
            border: 2px solid #ff4757; 
            color: #ff4757;
            position: relative;
            border-radius: 20px; 
            transition: border-color 0.4s ease, color 0.4s ease, background 0.4s ease;
            animation: borderPulseRed 2s infinite ease-in-out;
        }

        .game-popup.switching {
            animation: popSwitch 0.3s ease-out forwards;
        }

        .popup-title {
            font-size: 32px;
            font-weight: 900;
            letter-spacing: 3px;
            margin-bottom: 10px;
            text-transform: uppercase;
            text-shadow: 0 0 15px currentColor; 
            min-height: 40px; 
        }

        .popup-desc {
            font-size: 11px;
            color: rgba(255,255,255,0.7);
            margin-bottom: 35px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .game-popup.active-blue {
            border-color: #0abde3;
            color: #0abde3;
            background: #00FF00;
            animation: borderPulseBlue 1.5s infinite ease-in-out; 
        }

        .btn-game {
            width: 80%;
            padding: 18px 0;
            height: 60px; /* Set height fix agar tombol tidak loncat saat loading muncul */
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: white;
            background: #ff4757;
            border: none;
            cursor: pointer;
            border-radius: 12px; 
            box-shadow: 0 5px 0 #b33939;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            text-shadow: 0 2px 2px rgba(0,0,0,0.3);
            
            /* Flexbox untuk menengahkan loader */
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto; /* Center button */
        }

        .btn-game::after {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            transition: 0.5s;
            opacity: 0;
        }
        .btn-game:hover::after {
            opacity: 1;
            left: 100%;
        }

        .btn-game:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #b33939;
        }

        .btn-game.success {
            background: #0abde3;
            box-shadow: 0 5px 0 #0097e6, 0 0 25px rgba(10, 189, 227, 0.6);
            color: #002b36; 
        }
        .btn-game.success:active {
            box-shadow: 0 1px 0 #0097e6;
        }

        /* --- BAGIAN BARU: CSS LOADING SPINNER --- */
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(0, 43, 54, 0.3); /* Warna transparan gelap */
            border-top-color: #002b36; /* Warna utama gelap (match teks tombol) */
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .wm {
            position: fixed;
            bottom: 20px;
            font-size: 11px;
            color: #94a3b8;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

    <div id="gamePopup" class="game-popup">
        <div id="popupTitle" class="popup-title">TRY AGAIN</div>
        <div class="popup-desc">Welcome Back Player</div>
        
        <button id="magicBtn" class="btn-game">
            CONTINUE
        </button>
          
    </div>

    <script>
        const tombol = document.getElementById('magicBtn');
        const popup = document.getElementById('gamePopup');
        const title = document.getElementById('popupTitle');

        function scrambleText(element, finalText, color) {
            let iterations = 0;
            const symbols = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*"; 
            
            const interval = setInterval(() => {
                element.innerText = finalText
                .split("")
                .map((letter, index) => {
                    if(index < iterations) {
                        return finalText[index];
                    }
                    return symbols[Math.floor(Math.random() * symbols.length)];
                })
                .join("");
                
                if(iterations >= finalText.length) { 
                    clearInterval(interval);
                    element.style.color = color; 
                }
                
                iterations += 1/2; 
            }, 30); 
        }

        tombol.addEventListener('click', function() {
           
            popup.classList.remove('switching');
            void popup.offsetWidth; 
            popup.classList.add('switching');

            const isSuccess = tombol.classList.toggle('success');

            if (isSuccess) {
                // STATE: PROCESSING / LOADING
                popup.classList.add('active-blue');
                
                // Ganti Text dengan Element HTML Spinner
                tombol.innerHTML = '<div class="spinner"></div>';
                
                setTimeout(() => {
                    scrambleText(title, "PROCESSING", "#0abde3");
                }, 100);

            } else {
                // STATE: TRY AGAIN
                popup.classList.remove('active-blue');
                
                // Kembalikan ke Teks biasa
                tombol.innerText = "CONTINUE";
                
                setTimeout(() => {
                    scrambleText(title, "TRY AGAIN", "#ff4757");
                }, 100);
            }
        });
    </script>

</body>
</html>
